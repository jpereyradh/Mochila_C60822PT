(("undefined"!==typeof self?self:this).webpackJsonp=("undefined"!==typeof self?self:this).webpackJsonp||[]).push([[227],{1397:function(e,t,i){"use strict";i.r(t);var o,n=i(2),s=i(8),a=i(203),r=i(193),h=i(3);!function(e){e[e.None=0]="None",e[e.Single=1]="Single",e[e.Multi=2]="Multi"}(o||(o={}));var c=e=>{let t=1,i=1;const n={x:0,y:0,distance:0};let s=0,a=0,r=0,h=0,c=o.None;const l=e=>Math.hypot(e.touches[0].pageX-e.touches[1].pageX,e.touches[0].pageY-e.touches[1].pageY),g=(t,o)=>{let r=s+t-n.x,h=a+o-n.y;const c=e.offsetWidth*(i-1)/2,l=e.offsetHeight*(i-1)/2;return r=Math.sign(r)*Math.min(Math.abs(r),c),h=Math.sign(h)*Math.min(Math.abs(h),l),{dx:r,dy:h}},d=e=>{t=i,s=r,a=h,c=o.None,2===e.touches.length&&(e.preventDefault(),n.x=(e.touches[0].pageX+e.touches[1].pageX)/2,n.y=(e.touches[0].pageY+e.touches[1].pageY)/2,n.distance=l(e),c=o.Multi),1===e.touches.length&&(e.preventDefault(),n.x=e.touches[0].pageX,n.y=e.touches[0].pageY,n.distance=0,c=o.Single)},u=s=>{if(c===o.Multi&&2===s.touches.length){s.preventDefault(),i=(e=>{let i=0;if(e.scale)i=e.scale;else{i=l(e)/n.distance}return Math.min(Math.max(1,i*t),4)})(s);const e=(s.touches[0].pageX+s.touches[1].pageX)/2,o=(s.touches[0].pageY+s.touches[1].pageY)/2,a=g(e,o);r=a.dx,h=a.dy}if(c===o.Single&&1===s.touches.length){s.preventDefault(),i=t;const e=s.touches[0].pageX,o=s.touches[0].pageY,n=g(e,o);r=n.dx,h=n.dy}const a=`translate3d(${r}px, ${h}px, 0) scale(${i})`;e.style.transform=a,e.style.webkitTransform=a};e.addEventListener("touchstart",d),e.addEventListener("touchmove",u);return()=>{e.removeEventListener("touchstart",d),e.removeEventListener("touchmove",u)}},l=i(69),g=i.n(l),d=function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},u=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let p=class extends n.f{constructor(){super(...arguments),this.width=0,this.height=0,this.aspectRatio=0,this.xBorderRadius=!1,this.debouncedSetImageSize=g()(()=>{h.a.visualViewport&&h.a.visualViewport.scale>1||this.setImageSize()},250)}setImageSize(){this.$nextTick(()=>{const e={width:this.originalImageWidth,height:this.originalImageHeight,aspectRatio:this.originalImageWidth/this.originalImageHeight},t={width:this.$refs.container.offsetWidth,height:this.$refs.container.offsetHeight},{width:i,height:o,isTouchingHorizontally:n,isTouchingVertically:s}=Object(r.c)(e,t);this.width=i,this.height=o,this.aspectRatio=e.aspectRatio,this.xBorderRadius=!n&&!s,this.$emit("resize",{width:i,height:o})})}mounted(){this.setImageSize(),this.$nextTick(()=>{this.deinitPinchZoom=c(this.$refs.container)}),h.a.addEventListener("resize",this.debouncedSetImageSize)}beforeDestroy(){h.a.removeEventListener("resize",this.debouncedSetImageSize),this.deinitPinchZoom&&this.deinitPinchZoom()}};d([Object(n.e)({required:!0}),u("design:type",String)],p.prototype,"url",void 0),d([Object(n.e)({required:!0}),u("design:type",String)],p.prototype,"originalImageUrl",void 0),d([Object(n.e)({required:!0}),u("design:type",Number)],p.prototype,"originalImageWidth",void 0),d([Object(n.e)({required:!0}),u("design:type",Number)],p.prototype,"originalImageHeight",void 0),d([Object(n.e)({required:!0}),u("design:type",String)],p.prototype,"title",void 0),d([Object(s.d)("postAction").Getter,u("design:type",Boolean)],p.prototype,"xExpandedPostTextPanel",void 0),d([Object(n.g)("xExpandedPostTextPanel"),u("design:type",Function),u("design:paramtypes",[]),u("design:returntype",void 0)],p.prototype,"setImageSize",null),p=d([Object(n.a)({components:{ImageThumbnail:a.a}})],p);var f=p,m=i(5),y=Object(m.a)(f,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"container",class:["w-full","h-full","flex","items-center","justify-center"]},[t("ImageThumbnail",{key:e.url,class:e.xBorderRadius&&"rounded-sm",attrs:{title:e.title,width:e.width,height:e.height,src:e.originalImageUrl||e.url,"original-image-height":e.originalImageHeight,"original-image-width":e.originalImageWidth,"aspect-ratio":e.aspectRatio,"proxy-image":!0,"process-image":!0,"placeholder-color":"'transparent'","placeholder-color-value":void 0},on:{load:function(t){return e.$emit("load")},error:function(t){return e.$emit("error")}}})],1)}),[],!1,null,null,null);t.default=y.exports}}]);
//# sourceMappingURL=227-e8b11bf58d8d41ba9347.chunk.js.map